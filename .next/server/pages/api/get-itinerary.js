"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/get-itinerary";
exports.ids = ["pages/api/get-itinerary"];
exports.modules = {

/***/ "(api)/./pages/api/get-itinerary.ts":
/*!************************************!*\
  !*** ./pages/api/get-itinerary.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\nconst GPT_KEY = process.env.GPT_API_KEY;\nconst headers = {\n    \"Content-Type\": \"application/json\",\n    \"Authorization\": `Bearer ${GPT_KEY}`\n};\nasync function handler(req, res) {\n    let days, city;\n    if (req.body) {\n        let body = JSON.parse(req.body);\n        days = body.days;\n        city = body.city;\n    }\n    const parts = city.split(\" \");\n    if (parts.length > 5) {\n        throw new Error(\"please reduce size of request\");\n    }\n    if (days > 10) {\n        days = 10;\n    }\n    let basePrompt = `You are a travel guide that knows everything about ${city}. I am a tourist who has never visited ${city}. What is an ideal itinerary for ${days} days in ${city} that includes all the city's main attractions, some historic and some adventerous? Break out your receommendation for each day into morning, afternoon and evening activities and recommend top rated restaurants. Always keep itineraries to under 500 words.`;\n    try {\n        const response = await fetch(\"https://api.openai.com/v1/completions\", {\n            method: \"POST\",\n            headers,\n            body: JSON.stringify({\n                model: \"text-davinci-003\",\n                prompt: basePrompt,\n                temperature: 0,\n                max_tokens: 550\n            })\n        });\n        const itinerary = await response.json();\n        const pointsOfInterestPrompt = \"Extract the points of interest out of this text, with no additional words, separated by commas: \" + itinerary.choices[0].text;\n        res.status(200).json({\n            message: \"success\",\n            pointsOfInterestPrompt,\n            itinerary: itinerary.choices[0].text\n        });\n    } catch (err) {\n        console.log(\"error: \", err);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvZ2V0LWl0aW5lcmFyeS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsNkVBQTZFO0FBYTdFLE1BQU1BLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVztBQUV2QyxNQUFNQyxVQUFVO0lBQ2QsZ0JBQWdCO0lBQ2hCLGlCQUFpQixDQUFDLE9BQU8sRUFBRUosUUFBUSxDQUFDO0FBQ3RDO0FBRWUsZUFBZUssUUFDNUJDLEdBQW1CLEVBQ25CQyxHQUFrQyxFQUNsQztJQUNBLElBQUlDLE1BQU1DO0lBQ1YsSUFBSUgsSUFBSUksSUFBSSxFQUFFO1FBQ1osSUFBSUEsT0FBT0MsS0FBS0MsS0FBSyxDQUFDTixJQUFJSSxJQUFJO1FBQzlCRixPQUFPRSxLQUFLRixJQUFJO1FBQ2hCQyxPQUFPQyxLQUFLRCxJQUFJO0lBQ2xCLENBQUM7SUFFRCxNQUFNSSxRQUFRSixLQUFLSyxLQUFLLENBQUM7SUFFekIsSUFBSUQsTUFBTUUsTUFBTSxHQUFHLEdBQUc7UUFDcEIsTUFBTSxJQUFJQyxNQUFNLGlDQUFnQztJQUNsRCxDQUFDO0lBRUQsSUFBSVIsT0FBTyxJQUFJO1FBQ2JBLE9BQU87SUFDVCxDQUFDO0lBRUQsSUFBSVMsYUFBYSxDQUFDLG1EQUFtRCxFQUFFUixLQUFLLHVDQUF1QyxFQUFFQSxLQUFLLGlDQUFpQyxFQUFFRCxLQUFLLFNBQVMsRUFBRUMsS0FBSywrUEFBK1AsQ0FBQztJQUNsYixJQUFJO1FBQ0YsTUFBTVMsV0FBVyxNQUFNQyxNQUFNLHlDQUF5QztZQUNwRUMsUUFBUTtZQUNSaEI7WUFDQU0sTUFBTUMsS0FBS1UsU0FBUyxDQUFDO2dCQUNuQkMsT0FBTztnQkFDUEMsUUFBUU47Z0JBQ1JPLGFBQWE7Z0JBQ2JDLFlBQVk7WUFDZDtRQUNGO1FBQ0EsTUFBTUMsWUFBWSxNQUFNUixTQUFTUyxJQUFJO1FBQ3JDLE1BQU1DLHlCQUF5QixxR0FBcUdGLFVBQVVHLE9BQU8sQ0FBQyxFQUFFLENBQUNDLElBQUk7UUFFN0p2QixJQUFJd0IsTUFBTSxDQUFDLEtBQUtKLElBQUksQ0FBQztZQUNuQkssU0FBUztZQUNUSjtZQUNBRixXQUFXQSxVQUFVRyxPQUFPLENBQUMsRUFBRSxDQUFDQyxJQUFJO1FBQ3RDO0lBRUYsRUFBRSxPQUFPRyxLQUFLO1FBQ1pDLFFBQVFDLEdBQUcsQ0FBQyxXQUFXRjtJQUN6QjtBQUNGLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWdwdDMvLi9wYWdlcy9hcGkvZ2V0LWl0aW5lcmFyeS50cz8wMDY0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIE5leHQuanMgQVBJIHJvdXRlIHN1cHBvcnQ6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwaS1yb3V0ZXMvaW50cm9kdWN0aW9uXG5pbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0J1xuXG50eXBlIERhdGEgPSB7XG4gIG1lc3NhZ2U6IHN0cmluZyxcbiAgcG9pbnRzT2ZJbnRlcmVzdFByb21wdDogYW55LFxuICBpdGluZXJhcnk6IGFueSxcbn1cblxudHlwZSBFcnJvciA9IHtcbiAgbWVzc2FnZTogc3RyaW5nLFxufVxuXG5jb25zdCBHUFRfS0VZID0gcHJvY2Vzcy5lbnYuR1BUX0FQSV9LRVlcblxuY29uc3QgaGVhZGVycyA9IHtcbiAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7R1BUX0tFWX1gXG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlPERhdGEgfCBFcnJvcj5cbikge1xuICBsZXQgZGF5cywgY2l0eVxuICBpZiAocmVxLmJvZHkpIHtcbiAgICBsZXQgYm9keSA9IEpTT04ucGFyc2UocmVxLmJvZHkpXG4gICAgZGF5cyA9IGJvZHkuZGF5c1xuICAgIGNpdHkgPSBib2R5LmNpdHlcbiAgfVxuXG4gIGNvbnN0IHBhcnRzID0gY2l0eS5zcGxpdCgnICcpXG5cbiAgaWYgKHBhcnRzLmxlbmd0aCA+IDUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSByZWR1Y2Ugc2l6ZSBvZiByZXF1ZXN0JylcbiAgfVxuICBcbiAgaWYgKGRheXMgPiAxMCkge1xuICAgIGRheXMgPSAxMFxuICB9XG5cbiAgbGV0IGJhc2VQcm9tcHQgPSBgWW91IGFyZSBhIHRyYXZlbCBndWlkZSB0aGF0IGtub3dzIGV2ZXJ5dGhpbmcgYWJvdXQgJHtjaXR5fS4gSSBhbSBhIHRvdXJpc3Qgd2hvIGhhcyBuZXZlciB2aXNpdGVkICR7Y2l0eX0uIFdoYXQgaXMgYW4gaWRlYWwgaXRpbmVyYXJ5IGZvciAke2RheXN9IGRheXMgaW4gJHtjaXR5fSB0aGF0IGluY2x1ZGVzIGFsbCB0aGUgY2l0eSdzIG1haW4gYXR0cmFjdGlvbnMsIHNvbWUgaGlzdG9yaWMgYW5kIHNvbWUgYWR2ZW50ZXJvdXM/IEJyZWFrIG91dCB5b3VyIHJlY2VvbW1lbmRhdGlvbiBmb3IgZWFjaCBkYXkgaW50byBtb3JuaW5nLCBhZnRlcm5vb24gYW5kIGV2ZW5pbmcgYWN0aXZpdGllcyBhbmQgcmVjb21tZW5kIHRvcCByYXRlZCByZXN0YXVyYW50cy4gQWx3YXlzIGtlZXAgaXRpbmVyYXJpZXMgdG8gdW5kZXIgNTAwIHdvcmRzLmBcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL2NvbXBsZXRpb25zJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtb2RlbDogJ3RleHQtZGF2aW5jaS0wMDMnLFxuICAgICAgICBwcm9tcHQ6IGJhc2VQcm9tcHQsXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLFxuICAgICAgICBtYXhfdG9rZW5zOiA1NTBcbiAgICAgIH0pXG4gICAgfSlcbiAgICBjb25zdCBpdGluZXJhcnkgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICBjb25zdCBwb2ludHNPZkludGVyZXN0UHJvbXB0ID0gJ0V4dHJhY3QgdGhlIHBvaW50cyBvZiBpbnRlcmVzdCBvdXQgb2YgdGhpcyB0ZXh0LCB3aXRoIG5vIGFkZGl0aW9uYWwgd29yZHMsIHNlcGFyYXRlZCBieSBjb21tYXM6ICcgKyBpdGluZXJhcnkuY2hvaWNlc1swXS50ZXh0XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBtZXNzYWdlOiAnc3VjY2VzcycsXG4gICAgICBwb2ludHNPZkludGVyZXN0UHJvbXB0LFxuICAgICAgaXRpbmVyYXJ5OiBpdGluZXJhcnkuY2hvaWNlc1swXS50ZXh0XG4gICAgfSlcblxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmxvZygnZXJyb3I6ICcsIGVycilcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkdQVF9LRVkiLCJwcm9jZXNzIiwiZW52IiwiR1BUX0FQSV9LRVkiLCJoZWFkZXJzIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImRheXMiLCJjaXR5IiwiYm9keSIsIkpTT04iLCJwYXJzZSIsInBhcnRzIiwic3BsaXQiLCJsZW5ndGgiLCJFcnJvciIsImJhc2VQcm9tcHQiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwic3RyaW5naWZ5IiwibW9kZWwiLCJwcm9tcHQiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiLCJpdGluZXJhcnkiLCJqc29uIiwicG9pbnRzT2ZJbnRlcmVzdFByb21wdCIsImNob2ljZXMiLCJ0ZXh0Iiwic3RhdHVzIiwibWVzc2FnZSIsImVyciIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/get-itinerary.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/get-itinerary.ts"));
module.exports = __webpack_exports__;

})();